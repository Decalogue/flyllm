# 45. è·³è·ƒæ¸¸æˆII

<!-- å…ƒæ•°æ®æ ‡ç­¾ï¼ˆä¾¿äºAIæ£€ç´¢å’Œåˆ†ç±»ï¼‰ -->
**æ ‡ç­¾**ï¼š`åŠ¨æ€è§„åˆ’` `è´ªå¿ƒç®—æ³•` `æ•°ç»„` `ä¸­ç­‰`  
**åˆ†ç±»**ï¼š`åŠ¨æ€è§„åˆ’` / `è´ªå¿ƒç®—æ³•`  
**éš¾åº¦**ï¼šâ­â­ ä¸­ç­‰  
**é¢‘ç‡**ï¼šğŸ”¥ğŸ”¥ğŸ”¥ é«˜é¢‘

---

## é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º n çš„ 0 ç´¢å¼•æ•´æ•°æ•°ç»„ numsã€‚åˆå§‹ä½ç½®åœ¨ä¸‹æ ‡ 0ã€‚

æ¯ä¸ªå…ƒç´  nums[i] è¡¨ç¤ºä»ç´¢å¼• i å‘åè·³è½¬çš„æœ€å¤§é•¿åº¦ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœä½ åœ¨ç´¢å¼• i å¤„ï¼Œä½ å¯ä»¥è·³è½¬åˆ°ä»»æ„ (i + j) å¤„ï¼š
- 0 <= j <= nums[i] ä¸”
- i + j < n

è¿”å›åˆ°è¾¾ n - 1 çš„æœ€å°è·³è·ƒæ¬¡æ•°ã€‚æµ‹è¯•ç”¨ä¾‹ä¿è¯å¯ä»¥åˆ°è¾¾ n - 1ã€‚

### ç¤ºä¾‹ 1

```
è¾“å…¥: nums = [2,3,1,1,4]
è¾“å‡º: 2
è§£é‡Š: è·³åˆ°æœ€åä¸€ä¸ªä½ç½®çš„æœ€å°è·³è·ƒæ•°æ˜¯ 2ã€‚
     ä»ä¸‹æ ‡ä¸º 0 è·³åˆ°ä¸‹æ ‡ä¸º 1 çš„ä½ç½®ï¼Œè·³ 1 æ­¥ï¼Œç„¶åè·³ 3 æ­¥åˆ°è¾¾æ•°ç»„çš„æœ€åä¸€ä¸ªä½ç½®ã€‚
```

### ç¤ºä¾‹ 2

```
è¾“å…¥: nums = [2,3,0,1,4]
è¾“å‡º: 2
```

### æç¤º

- 1 <= nums.length <= 10^4
- 0 <= nums[i] <= 1000
- é¢˜ç›®ä¿è¯å¯ä»¥åˆ°è¾¾ n - 1

---

## ğŸ“‹ é¢è¯•è¦ç‚¹é€ŸæŸ¥ï¼ˆçŸ¥è¯†å¡ç‰‡ï¼‰

### æ ¸å¿ƒæ€è·¯
**ä¸€å¥è¯æ€»ç»“**ï¼šä»å³åˆ°å·¦DPè®°å½•æ¯ä¸ªä½ç½®åˆ°ç»ˆç‚¹çš„æœ€å°‘è·³è·ƒæ¬¡æ•°ï¼Œæˆ–è€…ç”¨è´ªå¿ƒç®—æ³•ä»å·¦åˆ°å³è·Ÿè¸ªå½“å‰èƒ½åˆ°è¾¾çš„æœ€è¿œä½ç½®ã€‚

**å…³é”®è¯**ï¼š`åŠ¨æ€è§„åˆ’` `è´ªå¿ƒç®—æ³•` `æœ€å°‘è·³è·ƒæ¬¡æ•°`

### å¤æ‚åº¦é€Ÿè®°
- **æ—¶é—´å¤æ‚åº¦**ï¼š
  - DPè§£æ³•ï¼šO(nÂ²) - æ¯ä¸ªä½ç½®éœ€è¦æ£€æŸ¥æ‰€æœ‰å¯è·³ä½ç½®
  - è´ªå¿ƒè§£æ³•ï¼šO(n) - ä¸€æ¬¡éå†
- **ç©ºé—´å¤æ‚åº¦**ï¼š
  - DPè§£æ³•ï¼šO(n) - DPæ•°ç»„
  - è´ªå¿ƒè§£æ³•ï¼šO(1) - åªä½¿ç”¨å‡ ä¸ªå˜é‡

### è®°å¿†å£è¯€
"ä»å³åˆ°å·¦DPæ‰¾æœ€å°ï¼Œè´ªå¿ƒä¸€æ¬¡éå†æ›´é«˜æ•ˆ"

---

## è§£é¢˜æ€è·¯

### æ ¸å¿ƒæ€æƒ³

**æ–¹æ³•1ï¼šåŠ¨æ€è§„åˆ’ï¼ˆä»å³åˆ°å·¦ï¼‰**
- `dp[i]` è¡¨ç¤ºä»ä½ç½® i è·³åˆ°ç»ˆç‚¹ (n-1) çš„æœ€å°‘è·³è·ƒæ¬¡æ•°
- ä»å³åˆ°å·¦éå†ï¼Œå¯¹äºæ¯ä¸ªä½ç½® iï¼ŒæŸ¥çœ‹å®ƒèƒ½è·³åˆ°çš„æ‰€æœ‰ä½ç½®ï¼Œå–æœ€å°å€¼
- åˆå§‹çŠ¶æ€ï¼š`dp[n-1] = 0`ï¼ˆç»ˆç‚¹ä¸éœ€è¦è·³ï¼‰

**æ–¹æ³•2ï¼šè´ªå¿ƒç®—æ³•ï¼ˆæ¨èï¼‰**
- ç»´æŠ¤å½“å‰èƒ½åˆ°è¾¾çš„æœ€è¿œä½ç½® `max_reach`
- ç»´æŠ¤å½“å‰è·³è·ƒçš„è¾¹ç•Œ `end`
- å½“åˆ°è¾¾è¾¹ç•Œæ—¶ï¼Œå¢åŠ è·³è·ƒæ¬¡æ•°ï¼Œæ›´æ–°è¾¹ç•Œä¸ºå½“å‰èƒ½åˆ°è¾¾çš„æœ€è¿œä½ç½®

### ç®—æ³•æ­¥éª¤

#### æ–¹æ³•1ï¼šDPï¼ˆä»å³åˆ°å·¦ï¼‰

1. åˆå§‹åŒ– `dp` æ•°ç»„ï¼Œé•¿åº¦ä¸º nï¼Œæ‰€æœ‰å€¼è®¾ä¸ºæ— ç©·å¤§
2. `dp[n-1] = 0`ï¼ˆç»ˆç‚¹ä¸éœ€è¦è·³ï¼‰
3. ä» `n-2` åˆ° `0` éå†ï¼š
   - å¯¹äºä½ç½® iï¼Œæ£€æŸ¥æ‰€æœ‰å¯è·³ä½ç½® `[i+1, i+nums[i]]`
   - `dp[i] = min(dp[j] for j in range(i+1, i+nums[i]+1)) + 1`
4. è¿”å› `dp[0]`

#### æ–¹æ³•2ï¼šè´ªå¿ƒç®—æ³•

1. åˆå§‹åŒ– `jumps = 0`ï¼ˆè·³è·ƒæ¬¡æ•°ï¼‰
2. åˆå§‹åŒ– `max_reach = 0`ï¼ˆå½“å‰èƒ½åˆ°è¾¾çš„æœ€è¿œä½ç½®ï¼‰
3. åˆå§‹åŒ– `end = 0`ï¼ˆå½“å‰è·³è·ƒçš„è¾¹ç•Œï¼‰
4. éå†æ•°ç»„ï¼ˆä¸éå†æœ€åä¸€ä¸ªå…ƒç´ ï¼‰ï¼š
   - æ›´æ–° `max_reach = max(max_reach, i + nums[i])`
   - å½“ `i == end` æ—¶ï¼ˆåˆ°è¾¾å½“å‰è¾¹ç•Œï¼‰ï¼š
     - `jumps += 1`
     - `end = max_reach`
5. è¿”å› `jumps`

### ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸ªæ–¹æ³•ï¼Ÿ

- **DPä¼˜åŠ¿**ï¼šæ€è·¯ç›´è§‚ï¼Œå®¹æ˜“ç†è§£
- **DPç¼ºç‚¹**ï¼šæ—¶é—´å¤æ‚åº¦O(nÂ²)ï¼Œå¯¹äºå¤§æ•°æ®é‡è¾ƒæ…¢
- **è´ªå¿ƒä¼˜åŠ¿**ï¼šæ—¶é—´å¤æ‚åº¦O(n)ï¼Œç©ºé—´å¤æ‚åº¦O(1)ï¼Œæœ€ä¼˜è§£
- **é€‚ç”¨åœºæ™¯**ï¼šæœºè€ƒæ—¶ä¼˜å…ˆç”¨è´ªå¿ƒï¼Œæ—¶é—´æ›´å°‘

---

## å®Œæ•´ä»£ç å®ç°

### æ–¹æ³•1ï¼šåŠ¨æ€è§„åˆ’ï¼ˆä»å³åˆ°å·¦ï¼‰

```python
class Solution:
    def jump(self, nums: List[int]) -> int:
        n = len(nums)
        # dp[i] è¡¨ç¤ºä»ä½ç½®iè·³åˆ°ç»ˆç‚¹çš„æœ€å°‘è·³è·ƒæ¬¡æ•°
        dp = [float('inf')] * n
        dp[n - 1] = 0  # ç»ˆç‚¹ä¸éœ€è¦è·³
        
        # ä»å³åˆ°å·¦éå†
        for i in range(n - 2, -1, -1):
            # ä»ä½ç½®iæœ€å¤šèƒ½è·³åˆ° i + nums[i]
            max_jump = min(i + nums[i], n - 1)
            # åœ¨å¯è·³èŒƒå›´å†…æ‰¾åˆ°æœ€å°å€¼
            for j in range(i + 1, max_jump + 1):
                dp[i] = min(dp[i], dp[j] + 1)
        
        return dp[0]
```

**å¤æ‚åº¦åˆ†æï¼š**
- æ—¶é—´å¤æ‚åº¦ï¼šO(nÂ²)ï¼Œå¯¹äºæ¯ä¸ªä½ç½®éœ€è¦æ£€æŸ¥æ‰€æœ‰å¯è·³ä½ç½®
- ç©ºé—´å¤æ‚åº¦ï¼šO(n)ï¼ŒDPæ•°ç»„

### æ–¹æ³•2ï¼šè´ªå¿ƒç®—æ³•ï¼ˆæ¨èï¼‰â­

```python
class Solution:
    def jump(self, nums: List[int]) -> int:
        n = len(nums)
        if n <= 1:
            return 0 
        
        jumps = 0  # è·³è·ƒæ¬¡æ•°
        max_reach = 0  # å½“å‰èƒ½åˆ°è¾¾çš„æœ€è¿œä½ç½®
        end = 0  # å½“å‰è·³è·ƒçš„è¾¹ç•Œ
        
        # éå†åˆ°å€’æ•°ç¬¬äºŒä¸ªä½ç½®å³å¯
        for i in range(n - 1):
            # æ›´æ–°èƒ½åˆ°è¾¾çš„æœ€è¿œä½ç½®
            max_reach = max(max_reach, i + nums[i])
            
            # åˆ°è¾¾å½“å‰è¾¹ç•Œï¼Œéœ€è¦è¿›è¡Œä¸‹ä¸€æ¬¡è·³è·ƒ
            if i == end:
                jumps += 1
                end = max_reach
                
                # å¦‚æœå·²ç»èƒ½åˆ°è¾¾ç»ˆç‚¹ï¼Œæå‰ç»“æŸ
                if max_reach >= n - 1:
                    break
        
        return jumps
```

**å¤æ‚åº¦åˆ†æï¼š**
- æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œä¸€æ¬¡éå†
- ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œåªä½¿ç”¨å¸¸æ•°ç©ºé—´

### æ–¹æ³•3ï¼šè´ªå¿ƒç®—æ³•ï¼ˆç®€åŒ–ç‰ˆï¼‰

```python
class Solution:
    def jump(self, nums: List[int]) -> int:
        n = len(nums)
        jumps = 0
        current_end = 0
        farthest = 0
        
        for i in range(n - 1):
            farthest = max(farthest, i + nums[i])
            if i == current_end:
                jumps += 1
                current_end = farthest
        
        return jumps
```

---

## ç®—æ³•å›¾è§£

### DPæ–¹æ³•ç¤ºä¾‹ï¼šnums = [2,3,1,1,4]

```
ç´¢å¼•:  0  1  2  3  4
nums:  2  3  1  1  4
dp:    âˆ  âˆ  âˆ  âˆ  0

ä»å³åˆ°å·¦ï¼š
i=3: dp[3] = min(dp[4]) + 1 = 0 + 1 = 1
i=2: dp[2] = min(dp[3]) + 1 = 1 + 1 = 2
i=1: dp[1] = min(dp[2], dp[3], dp[4]) + 1 = min(2,1,0) + 1 = 1
i=0: dp[0] = min(dp[1], dp[2]) + 1 = min(1,2) + 1 = 2

ç»“æœï¼šdp[0] = 2
```

### è´ªå¿ƒæ–¹æ³•ç¤ºä¾‹ï¼šnums = [2,3,1,1,4]

```
i=0: max_reach = 2, end = 0
     åˆ°è¾¾è¾¹ç•Œï¼Œjumps=1, end=2

i=1: max_reach = max(2, 1+3) = 4, end = 2
     æœªåˆ°è¾¾è¾¹ç•Œ

i=2: max_reach = max(4, 2+1) = 4, end = 2
     åˆ°è¾¾è¾¹ç•Œï¼Œjumps=2, end=4

i=3: max_reach = max(4, 3+1) = 4, end = 4
     åˆ°è¾¾è¾¹ç•Œä½†å·²èƒ½åˆ°ç»ˆç‚¹ï¼Œç»“æŸ

ç»“æœï¼šjumps = 2
```

---

## å¸¸è§é”™è¯¯

### âŒ é”™è¯¯1ï¼šç†è§£é”™è¯¯
```python
# é”™è¯¯ï¼šä»¥ä¸ºnums[i]è¡¨ç¤ºå›ºå®šè·³nums[i]æ­¥
for i in range(len(nums)):
    jump(nums[i])  # é”™è¯¯ç†è§£
```

### âŒ é”™è¯¯2ï¼šDPæ–¹å‘é”™è¯¯
```python
# é”™è¯¯ï¼šä»å·¦åˆ°å³DPï¼Œéœ€è¦è®°å½•æ‰€æœ‰å¯èƒ½è·¯å¾„
# è¿™æ ·ä¼šè¶…æ—¶æˆ–é€»è¾‘å¤æ‚
```

### âœ… æ­£ç¡®æ€è·¯
- DPä»å³åˆ°å·¦ï¼šç»ˆç‚¹çŠ¶æ€å·²çŸ¥ï¼Œå‘å‰æ¨å¯¼
- è´ªå¿ƒä»å·¦åˆ°å³ï¼šæ¯æ¬¡é€‰æ‹©èƒ½è·³æœ€è¿œçš„ä½ç½®

---

## æµ‹è¯•ç”¨ä¾‹

```python
def test_jump():
    solution = Solution()
    
    # ç¤ºä¾‹1
    assert solution.jump([2,3,1,1,4]) == 2
    
    # ç¤ºä¾‹2
    assert solution.jump([2,3,0,1,4]) == 2
    
    # è¾¹ç•Œæƒ…å†µï¼šåªæœ‰ä¸€ä¸ªå…ƒç´ 
    assert solution.jump([1]) == 0
    
    # è¾¹ç•Œæƒ…å†µï¼šä¸¤ä¸ªå…ƒç´ 
    assert solution.jump([2,1]) == 1
    
    # è¾¹ç•Œæƒ…å†µï¼šå¯ä»¥ä¸€æ­¥åˆ°è¾¾
    assert solution.jump([5,1,1,1,1,1]) == 1
    
    print("æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹é€šè¿‡ï¼")
```

---

## ç›¸ä¼¼é¢˜ç›®

- [55. è·³è·ƒæ¸¸æˆ](https://leetcode.cn/problems/jump-game/) - åˆ¤æ–­æ˜¯å¦èƒ½åˆ°è¾¾ç»ˆç‚¹
- [1306. è·³è·ƒæ¸¸æˆ III](https://leetcode.cn/problems/jump-game-iii/) - å‘å‰æˆ–å‘åè·³
- [1345. è·³è·ƒæ¸¸æˆ IV](https://leetcode.cn/problems/jump-game-iv/) - å¯ä»¥è·³ç›¸åŒå€¼çš„ä½ç½®

---

## æ€»ç»“

ä»å³åˆ°å·¦DPæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£æ³•ã€‚ä½†æœºè€ƒæ—¶å»ºè®®ç”¨è´ªå¿ƒç®—æ³•ï¼Œå› ä¸ºï¼š
1. âœ… æ—¶é—´å¤æ‚åº¦æ›´ä¼˜ï¼šO(n) vs O(nÂ²)
2. âœ… ç©ºé—´å¤æ‚åº¦æ›´ä¼˜ï¼šO(1) vs O(n)
3. âœ… ä»£ç æ›´ç®€æ´

**è®°ä½æ ¸å¿ƒæ€æƒ³ï¼š**
- DPï¼š`dp[i] = min(dp[æ‰€æœ‰å¯è·³ä½ç½®]) + 1`
- è´ªå¿ƒï¼šæ¯æ¬¡åˆ°è¾¾è¾¹ç•Œæ—¶ï¼Œé€‰æ‹©å½“å‰èƒ½è·³æœ€è¿œçš„ä½ç½®ä½œä¸ºæ–°è¾¹ç•Œ
